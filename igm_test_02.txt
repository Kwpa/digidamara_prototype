Let's make a game!
  name:Digidamara_1
  author:BAGEL+BALLOON and friends
  desc:A game about the end of the universe
  created:03/12/2021
  version:1

Settings

  background:https://ak.picdn.net/shutterstock/videos/1014299564/thumb/1.jpg

CSS
  #box-main
  {
  	left:0px;
  	top:0px;
  	bottom:0px;
    right:0px;
  	overflow:hidden;
  	width:100%;
  	position:absolute;
    }
  #box-logBox
  {
    top:70%;
    width:50%;
    height:30%;
  }
  .teams
  {
    height:200%
  }
  .team1
  {
    position:absolute;
    top:30%;
    left:20%
  }
  .team2
  {
    position:absolute;
    top:30%;
    left:50%
  }
  .team3
  {
    position:absolute;
    top:30%;
    left:80%
  }

  .thing-icon,.particle
  {
    width:200px;
    height:200px;
  }

Layout
  *logBox
    contains:Log
    class:bottom

  *main
    contains:res, buttons, logBox
  *res
    contains:Resources
    class:fullWidth
  *buttons
    contains:Buttons

Includes

  *include teaminit %teamid %teamname %health="100" %refrhealth="50" %lives="24" %maxhealth="100" %healthboost="100" %healthloss="10" %clickcost="1" %sparkle="2"
  *[%teamid]health
    name: [%teamname]
    on start:
      start with:[%health]
    end
    on tick:
      lose [%teamid]healthloss [%teamid]health
      if ([%teamid]health<0.5 and [%teamid]lives>=1)
        lose 1 [%teamid]lives
        log [n:this] has lost a life. [[%teamid]lives-1] lives remaining!
        [%teamid]health is [%refrhealth]
      end
    end
  *[%teamid]dead
    on start:
      start with:0
    end
    always hidden
  *[%teamid]lives
    on start:
      start with:[%lives]
    end
    on tick:
      if ([%teamid]lives<0.5 and [%teamid]dead=0)
        log No lives left. [%teamname] are out of the comp!
        [%teamid]dead is 1
        [%teamid]health is 0
      end
    end
  *[%teamid]maxhealth
    on start:
      start with:[%maxhealth]
    end
  *[%teamid]healthboost
    on start:
      start with:[%healthboost]
    end
  *[%teamid]healthloss
    on start:
      start with:[%healthloss]
    end
  *[%teamid]clickcost
    on start:
      start with:[%clickcost]
    end
  *[%teamid]sparkle
    on start:
      start with:[%sparkle]
    end

  *include teambuttonsetup %teamid %teamname
    *[%teamid]button
      name:[%teamname]
      desc:Click [%teamname] to generate Sparks, costs Energy
      class:[%teamid] team
      icon:https://static.thenounproject.com/png/788246-200.png
      tooltip origin:bottom
      tooltip class:red
      text:[%teamname] <//>(LIVES = [[%teamid]lives])<//>(HP = [[%teamid]health]/[[%teamid]maxhealth])
      cost:[%teamid]clickcost energy
      on click:
        if (energy>=1 and [%teamid]health>=1)
          yield [%teamid]sparkle sparks
          yield [%teamid]healthboost [%teamid]health
          lose [%teamid]clickcost energy
          if ([%teamid]health > [%teamid]maxhealth)
            [%teamid]health is [%teamid]maxhealth
          end
        end
      end

  *include schedevent %schedtime %eventname %amessage %bmessage %prob="100%"
    on tick:
      if (eventtime=[%schedtime])
        if (chance([%prob])=1)
          log [%eventname] [%amessage]
        else
          log [%eventname] [%bmessage]
        end
      end
    end

  *include cndevent %condition %eventname %amessage %bmessage %abprob="100%"
    *[%eventname]
    start with:1
    always hidden
    on tick:
      if ([%condition] and [%eventname]=1)
        if (chance([%abprob])=1)
          log [%eventname] [%amessage]
        else
          log [%eventname] [%bmessage]
        end
        this is 0
      end
    end

  *include cndtoggevent %acondition %bcondition %eventname %aaction %baction
    *[%eventname]
    always hidden
    start with:0
    on tick:
      if ([%acondition] and [%eventname]=0)
        [%aaction]
        this is 1
      else if ([%bcondition] and [%eventname]=1)
        [%baction]
        this is 0
      end
    end

Resources

// time

  *eventtime
    on tick:
      yield 1 eventtime
    end

    // !! put all scheduled events here //

    [i:schedevent %schedtime="2" %eventname="event1" %amessage="this cool event" %bmessage="this rare event" %prob="50%"]
    [i:schedevent %schedtime="10" %eventname="Event mega" %amessage="Hey" %bmessage="Howdy!" %prob="50%"]
    [i:schedevent %schedtime="20" %eventname="Event mega" %amessage="You look nice" %bmessage="You my partner?" %prob="50%"]

// conditionals

  // !! put all conditional events here //

  [i:cndevent %condition="energy<=5" %eventname="cndevent1" %amessage="Running out of energy!" %bmessage="NO"]
  //[i:cndtoggevent %acondition="team1health<=50" %bcondition="team1health>50" %eventname="cndtoggevent1" %aaction="yield 100 energy" %baction="yield 200 sparks"]

// teams

  [i:teaminit %teamid="team2" %teamname="Team 2"]

// team 1

  *team1health
    name: Team 1
    on start:
      start with:100
    end
    on tick:
      lose team1healthloss team1health
      if (team1health<0.5 and team1lives>=1)
        lose 1 team1lives
        log [n:this] has lost a life. [team1lives-1] lives remaining!
        team1health is 50
      else if (team1lives<1)
        team1health is 0
      end
    end

  *team1dead
    on start:
      start with:0
    end
    always hidden

  *team1lives
    on start:
      start with:24
    end
    on tick:
      if (team1lives<0.5 and team1dead=0)
        log No lives left.
        team1dead is 1
      end
    end

  *team1maxhealth
    on start:
      start with:100
    end

  *team1healthboost
    on start:
      start with:100
    end

  *team1healthloss
    on start:
      start with:10
    end

  *team1clickcost
    on start:
      start with:1
    end

  *team1sparkle
    on start:
      start with:2
    end

// main resources

  *energy
    name:Energy
    desc:Give your energy to the teams
    on start:
  		start with:10
  	end

  *spark|sparks
    name:Spark|Sparks
    desc:Dancers at the end of the universe generate this!

Buttons
  *TEMPLATE
    name:Team 1
    desc:Click Team 1 to generate Sparks, costs Energy
    icon:https://static.thenounproject.com/png/788246-200.png
    tooltip origin:bottom
    tooltip class:red

  *team1button
    name:Team 1
    class:team1 team
    text:Team 1 <//>(LIVES = [team1lives])<//>(HP = [team1health]/[team1maxhealth])
    cost:team1clickcost energy
    on click:
      if (energy>=1 and team1health>=1)
        yield team1sparkle sparks
        yield team1healthboost team1health
        lose team1clickcost energy
        if (team1health > team1maxhealth)
          team1health is team1maxhealth
        end
      end
    end

  [i:teambuttonsetup %teamid="team2" %teamname="Team Two"]

  *team3button
    name:Team 3
    class:team3 team
